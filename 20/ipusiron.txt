x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x

--- 第4章: 簡易ハッキングラボの作り方 ---

著者：IPUSIRON

x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x


■0x01.) はじめに

　たびたびメールや質問掲示板で「コンピュータに詳しくなりたいのですが、どうしたらよいですか？」という質問を見受けられます。一般的にこういった質問はタブーとされていますが、質問する気持ちもわからないわけではありません。現在どんなにスキルがある人でも、誰でも最初は初心者だったのです。例えば、アインシュタインだろうがニュートンだろうが、最初は物理学なんて知らなかったのです。
　さて、この質問に答えたいところですが、そう簡単には答えることができません。前回WBで書いた超多読法の話とちょっと似ていますが、私が紹介する方法が万人に向くわけではありません。同じ人間だったとしても、10歳のときと20歳のときの学習法は異なるでしょう。なぜなら基礎学力の差、学習スピード、社会的な環境、物に対する考え方などといった要素が異なるからです。まして、違う人間では、向き不向きはもっと顕著に表れるはずです。よって、学習法を教えるということは、主観的な学習法（整理法、環境構築法などを含む）を教えることにすぎないということです。それでも主観的な学習法を多数集めれば、その中に大多数において共通する（最大公約数となる）何らか方法も見つけることができますが、それを解説してもちょっと面白くないので、今回は完全に私の主観的な環境構築法を紹介したいと思います。

　最近引っ越して自分なりの完璧（に近い）と思える環境を構築できたことが、この記事を書こうとした一番の理由です。


■0x02.) 簡易ハッキングラボの利点

　ここでいうコンピュータの環境構築とは、ある自由に使える物理的空間をフル活用して自分専用のハッキング実験室、即ちハッキングラボを構築するということです。おそらく多くの人は部屋または部屋の一部（自分の書斎を持てない人）、またある人はガレージ、少数だと思いますが家丸ごともいるかもしれません。これらが空間の具体例となります。

　まず、ハッキングラボ構築後の利点を述べておきます。人によって状況が変わってくるので、利点は変化するかもしれませんが、大雑把に挙げると次のようになります。

・空間を効率的に利用できる。
・すぐ実験できる環境になる。
・実験する億劫さを解消できる。

　それではそれぞれの利点を詳しくてみていくことにします。
　第1に、空間を効率的に利用できるということが挙げられます。普通にPC環境を構築してしまうと、ディスプレイより上の空間が余ったりします。オフィスだと基本的にそういった形になってしまいますが、自宅の部屋がそれでは私には我慢できません。よって、PCデスクを購入する際は、必ずディスプレイの上に棚が付いていることが必須条件となります。ガレージ丸ごと利用できるといった自由度の高い人は別として、多くの人はひとつの部屋ぐらいしか自由に利用できないことでしょう。さらにその部屋で衣食住を兼ねるなら、部屋全体は使えないので、部屋の一部しか使えなくなります。こういった限られた空間の中で自分の理想的な環境を構築するというのは難しいものです。というのも何かを実験しようとすると、必然的にモノが増えてくるからです。
　例えば、複数のディスプレイ、プリンタ、スキャナ、スピーカー、ハブ、ルーターなどが最低限必要となることでしょう。さらに、人によっては実験がコンピュータ以外にも拡張します。私の場合は、電子工作、無線や犯罪手口の研究にも興味があるので、電子パーツ、オシロスコープ、安定化電源装置、はんだごて立て、無線機、受信機、卓上ドリルなども並べています。さらに、PCで作業しながらTVも見ているので、TVのモニターもPCデスクに載せています。ということは、PS2やXboxといった家庭用ゲーム機、ビデオ機、HDD/DVDレコーダー、CATV万能チューナーなどもPCデスクに固まることになります。
　メインデスク（メインPCが置いてあるPCデスク）から動かずに、あらゆることをこなすと考えた場合、上の空間を有効に利用しなければ収まりきれません。そうすると、機材を重ねていくことになるので、PCデスクに小さな棚を入れ子状にしたり、なるべく角張っている電気製品を重ねていくということになります。そのため、私は流線型の電気製品は嫌いです。無線をやる人の部屋をシャックというのですが、あのような綺麗に角張った機材を並べていくのが、空間の最高活用だと思っています。

　まだ使われていない空間もありますが、それは他の機材を今後置くことを想定してわざと空けているからです。

　ちょっと長くなってしまいました。話を戻します。
　第2にすぐ実験できる環境になるということが挙げられます。これはどういうことかというと、


　例えば、リモートから自分の実験用サーバーにアタックを仕掛けてルート権限を奪取する実験をしようとします。その実験がうまく成功して一段落つけばよいでしょうが、うまくいかず何日に渡って試行錯誤することもあります。そうした場合、実験環境を維持しておくだけのスペースが必要となります。さらに、試行錯誤している間に、別の実験をしたくなったとします。そうすると、放置している実験環境が増えてきて、明らかに空間を圧迫することになります。これをうまく解消するには、最初から複数の作業スペースを確保するのが一番簡単な方法です。しかし、これは空間に余裕がある人しか実現できません。そういった意味でガレージ丸ごと使える人が正直羨ましいです。そこでたどり着いた解決方法が、元々実験環境を完璧にしておいて、必要な実験器具の場所移動をしなくてもあらゆる実験を並行して進めることができるようにしておくことです。これなら最初に確保したスペース以上にはあまり新しい空間を必要としません。
　もっと具体的な例で示しましょう。先ほどの例ではリモートからアタックということなので、ネットワークが必要となります。そこでアタック用マシンと実験用マシンを用意して、ケーブルで繋ぐことになります。最初からこの2台のマシンをLANに接続してあればよいのですが、押入れから引っ張り出してきて新たにケーブルを繋ぐ（場合によってはハブを使う）ということになると結構大変です。そうすると、私の場合はうんざりしてしまい、「この実験は今じゃなくていいや」ということになってしまいます。セキュリティアカデメイアの講座用の実験が実は結構放置されていてもなんとか維持しているのは、最初からこのことを想定して環境作りをしていたからといえます。

　それでは最後になりますが、第3に実験する億劫さを解消できるということが挙げられます。私にとって実はこれがかなり重要です。
　PCが好きだとケーブルや小物、電子工作が好きだとICやコンデンサ、抵抗器といった小さな電子部品が急激に増加していきます。常に使っているものならよいのですが、そうでなく「今後使いそうだから」「安かったから」「ストックのため」といった理由で、どんどん増えていくのです。これは私に限らず、多くの人がそうでしょう。まどさんの自宅に行ったときも、「これいつ買ったの？」と思うような音楽用のケーブルやピン、コネクタなどが大量にありました。まどさんの家の場合は、機材の方がすごいですが（笑）。こうしたものをいつでも実験の際に取り出せるのが理想的な環境です。そのためには最初から収納にこだわる必要があります。この引出しにはケーブル、この引出しには筆記用具、この引出しには未完成の電子キットなどといったように仕分けていきます。ケーブルと一言でいっても、LANケーブル、電源ケーブル、USBケーブル、シリアルポートやプリンタポート用のケーブル、PC自作で使う延長ケーブル、ACタップなどたくさんあります。ケーブルは意外にもかさばるのでひとつの引出しでは無理かもしれません。つまり、PCデスクの環境作りとは別に、収納法や整理法も考慮する必要があるということになります。


■0x03.) メインデスク周りの環境作り

　メインPCが置いてある机をメインデスクと呼ぶことにします。メインPCが置いてあるということは、主にそこの前に座るということです。つまり、この場所を基点として、ハッキングラボの構築が始まるといえます。

　ここでは、一部屋自由に使えるとして話を進めます。すでにPCデスクを持っていたり、ある程度環境が完成している人もいると思いますが、引越しでゼロの状態から環境作りができるときに再考してみてください。

　それでは、まずメインデスク用のPCデスクを用意します。なるべく横幅・奥行きは大きい方がよいです。
　奥行きがないものを選択してしまうと、自分の胸・腹とキーボードの間にスペースがなくなってしまい、簡単な実験作業ができなくなってしまいます。また、本を広げながら何かを入力したいとき、苦労することになってしまいます。ELECOMのカタログ（Webで資料請求すれば、無料でもらえる。別に買うものがなくても1冊持ってると便利。コネクタの一覧などがよい）で調べると、PCのデスクの奥行きのタイプとして、600mm、700mm、850mm、1000mmとなっています。私は奥行きが800mmのタイプのものを使っています。最低700mmは欲しいところです。薄型ディスプレイだから奥行きがなくても大丈夫と思いがちですが、案外そうでもありません。ディスプレイの裏はケーブルがいっぱいになることを想定しておかなければなりません。また、ディスプレイと一緒に並べるものの奥行きとの整合性を取る必要があります。例えば、TVや他の機材（無線機、ゲーム機など）と並べるなら、それらの前面とディスプレイの前面が水平になるように設置することになります。こういったことも考慮しなければならないのです。ただ、奥行き850mm以上になると、格段にPCデスクの値段も跳ね上がります。例えば、ELECOMのCAI-1280CTという奥行き850mmの中で一番安いものでも、定価21万円もします（しかも、ディスプレイ上の棚がないので、さらにアウト）。奥行き800mmタイプなら、5万～10万以内で購入できます。Yahooオークションで購入すれば、さらに1,2万安くなると思います。
　次に横幅を考えます。これはディスプレイを何台置くかということを基準にして考えます。後ほど解説するPC切り替え機を使えば、PCの台数が多くてもディスプレイの台数を抑えることはできます。しかし、あくまでDOS/Vマシン用のディスプレイの台数を1台で収めることができるだけで、SunやMacを使う人は別に用意する必要があります。一応、DOS/V,Sun,Macの3つに対応したPC切り替え機も例外として存在しますが、かなり高くなります。このあたりは、自分の理想的なハッキングラボを想像しながら、最終的な何台のOSを活用するかで決定します。ただし、DOS/V機で動くものは同一カウントで結構です。Windows、Linux、FreeBSD、超漢字などは普通にDOS/V機で動くので、PC切り替え機さえ用意すればディスプレイ1台で十分ということになります。また、何台のPCを使うのかにも依存します。特にデスクトップPCの台数が重要となります。基本的にデスクトップPCはタワー型だと思いますが（キューブ型も2つ以上重ねれば一応タワーになる）、それらは腰下、即ちディスプレイの下側に置くことになります。ということはデスクトップPCの数が増えれば増えるほど、横幅を取るということです。厳密にいえばPCケースやディスプレイの寸法によって変わりますが、簡単な計算として2台弱でディスプレイ1台分の横幅と同一になります。一番間違いがない横幅の選択としては、ディスプレイが3台分横に並べることができる1,400mm以上のクラスです。私は1,450mmのPCデスクを使っています（定価9万ぐらい、購入価格7万ちょい）。左側から、TVモニター、PC用のディスプレイ（PC7台をこのディスプレイ1台で兼用）、機材その他というように並べています。そして、デスクトップPCは7台ちょうどよく収めることができています。もちろん、熱の環境上のため、ピッタリくっつけることはできないので、少し隙間を空けて配置しています。
　最後は高さですが、これは無条件で上の棚が付いているタイプを選びます。最初から付いているものを選べば最大限に空間を有効活用できる上に、コスト削減できます。ひとつの棚にディスプレイを3台置くことができれば、上下で最大6台置くことができます。実際は6台も置くことはありませんが、その分のスペースが確保できるという意味で好都合です。

　PCデスクを用意できたら、配置を考えます。部屋の大きさはもちろん、ドアや押入れ、窓の位置も考慮します。机を置くことによって、窓が全然開けられなかったり、ドアにひっかかっていては問題です。部屋が10乗以上と広ければ、机を中央に置くことをオススメします。よくアメリカのハッカー映画などを観ると、ガレージの中央付近にPCデスクを設置していることがよくあります。あれだとPCを動かすことなく、裏に回れば簡単にケーブルの付け替えができます。壁際にPCデスクを配置してしまうと、ケーブルの付け替えだけでも、PCを引き出す必要があり、かなり億劫ですし、効率が下がります。特殊な例になりますが、2つの部屋が繋がっていて襖で仕切られている和室なら、襖際にPCデスクを配置して、何かあれば別の部屋から回りこんで襖を開けて作業をするという手もあります。ちなみに、私の部屋は残念ながら狭いので、PCデスクを壁際に設置しています。PCデスクの裏（ディスプレイの裏やPCの裏）でケーブルがスパゲティ状態になっていて、もうPCを引き出して作業するのが正直うんざりです。そのため、最初から完璧な状態にしておきました。


■0x04.) 周辺機器を考える

　PCデスクの配置が決定したら、PCやモニターを思い思いに配置します。ここまで完了すれば、周辺機器の配置を行います。

　まず、周辺機器の一番の代表といえるのが、プリンタでしょう。家庭用プリンタでもディスプレイ1台分ぐらいのスペースを消費します。最近のコンピュータ界の流れとして、スキャナ機能を内蔵した多機能プリンタが増えています。これは大変スペースの有効活用できます。しかし、購入の際に注意することがあります。家庭用プリンタなら、エプソンやCanonなどのメジャーな日本の会社の製品を選びましょう（金に余裕があればリコー、ゼロックスが理想）。なぜなら、ユーザーが多い分、インクが安いからです。また、カラーインクが3色インクではなく、一色ずつに対応したインクがセットできるタイプがよいでしょう。3色カラーインクの中の一色だけが空になっただけで、交換するのはもったいないからです。インクを手動で補充すればコスト削減できますが、慣れないとうまくいかないもので、手に付くとなかなかおちません。私の場合、hp（ヒューレッドパッカード）社の多機能プリンタ（スキャナ、プリンタ、コピー機能が一体化されている）を購入しましたが、インクが高すぎて購入したのを後悔しています。詰め替えインクをオンライン販売しているショップを紹介します。

・エコショップ.com（http://ecotte-shop.com/）
・エレコムダイレクト（https://shop.elecom.co.jp/Store/CategoryList.aspx?CategoryKey=INK）


　次に、PC切り替え機を紹介します。私だけかもしれませんが、もうPC切り替え機から離れることはできません。一番の好きな周辺機器をひとつ選ぶとしたら、これを選択します。PC切り替え機がなくても、PCの台数と同じ数のディスプレイを用意すれば問題ないのですが、さすがに7台も利用するとスペースの問題からこれはなかなか実現できません。PC切り替え機を購入するときは、モニター切り替え機能だけではなく、モニター、キーボード、マウスも一緒に切り替えることができるものを購入しましょう。もちろんその分高くなりますが、そうでなければPCの台数が増えるとマウスとキーボードの数も増えてしまいスペースの有効利用ができなくなってしまうからです。最近では、スピーカーの切り替えも共有できるものもあるようです。これはこれで結構便利です。
　切り替え台数が増えれば増えるほど、値段が高くなります。4台を切り替えることができる普通のPC切り替え機なら1万前後で購入できるはずです。個人的には、ぷらっとホームで売っているPShareシリーズをオススメします。4台切り替えタイプでも3万ちょっとするので贅沢かもしれませんが、これを一度使うともう離れられません。PC切り替え機は色々使ってきましたが、個人向けではこれが最強と思っています。PShareを使えば、切り替え時にモニターの乱れが少なかったり、ボタンだけでなくキーボードだけ（[Shift]＋[Ctrl]＋[Alt]⇒数字⇒[Enter]）で切り替えできます。また、カスケード接続することで、PShareを多段接続して、切り替え台数を増やすこともできます。例えば、PShare EX（4台切り替え可能）の1ポートを利用して、別のPShare EXを繋げれば、7台（＝3台＋4台）が切り替えできるということです。もちろん、8ポートや16ポートの製品を利用すれば、その分たくさん増やせます。PShareなら信用（勝手にそう思っている）できる製品なので、別のメーカーが発売している製品のようにすぐに生産中止になることもないでしょう。長い期間販売してくれるシリーズということは、後で追加するときも安心できます。これは後ほど解説する収納法にも共通する心理です。下手に安いものを買うと、後で買い足すときに寸法や見た目に整合性が取れなくなってしまうことがあります。ところで、かなり便利なPShareですが、古いkensingtonのトラックボールやIBM製のスペースセーバーキーボードなどと相性が悪いことがあります。新しいPShareなら対応されているかもしれませんので、FAQをチェックしてみてください。

・ぷらっとホーム　PShareシリーズ（http://www.plathome.co.jp/products/pshare/）

　ぷらっとホームには興味深い製品を売っているので、見てみてください。私が一番お気に入りのお店です。ただし、高いですが･･･（苦笑）。


　外部に公開するサーバーがあるなら、UPS（無停電電源装置）も用意しておきましょう。これは停電が起きたとき、一定時間だけすぐに電源を維持してくれるものです。簡単にいえばバッテリーです。とはいえ数時間という長い時間の電源を維持してくれる者ではありません。あくまでサーバーの電源を切る余裕を持たせるためのものです。また、交流電圧の波形の乱れや瞬停（一瞬だけ電源が切れること）も解消できます。サーバー、モデム、ルーターやハブなどの電源をすべてUPSに接続すれば、停電になってもインターネット回線を維持できます。ルーターやハブの設置場所の関係上、UPSの台数も増えるかもしれませんが。MMORPGなどでPTプレイしているときに停電だと他のPT員に迷惑や心配をかけるので、ネットゲーム廃人にとってもUPSは不可欠かもしれません。
　UPSにも様々ありますが、雷サージ対応のACタップの拡大版のような形のUPSは、新品で1万円ぐらいで購入できます。私はAPCのUPSをYahooオークションで5千円前後でゲットしました。これでも個人レベルでは十分でしょう。
　ところで、UPSは鉛が入っていてかなり重いので、注意してください。ぎっくり腰になるぐらい本当に重いです。


■0x05.) ネットワークを構築する

　複数台のマシンを設置するということは、LANを構築することになり、ネットワークの勉強になります。色々なOSが混在する環境だと、さらに勉強になります。PC1台しか持っていない人は、是非2台目の購入をオススメします。2台あれば必然的にLANを組むことになり、ルーターやハブ、IPアドレスやプロトコルなどのネットワークの設定の知識が自然と身に付きます。2代目のマシンをメインPCにするつもりがなければ、安いものでも構いません。中古のCeleron/PentiumIIIのマシンなどは1万円以下と安価で購入できます。安いマシンならスペックも低いのでWindowsXPなどは動きませんが、LinuxやFreeBSDなら十分です。ただし、Linuxのディストリビューション（厳密にいうならばGUI環境）によっては低スペックでは辛いときがあります。
　VMWareやVirtualPCのようなエミュレータを利用して、仮想ネットワークを構築するという方法もあります。仮想ネットワークと実在するLANをブリッジ接続して、相互にやり取りすることもできます。エミュレータを使えば、1台のマシンであたかも複数台が存在するように実験することができます。しかし、複数のゲストOS（エミュレータで起動されたOSのこと）を実行するなら高スペックでなければまともに動きません。また、エミュレータでうまく動作しないOSも少なからず存在します。LinuxやFreeBSD、DOSといったメジャーOSならVMWareでも動作しますが、超漢字4の場合うまく動作しません（VirtualPCでは動作する）。私は実機に触ることは大事だと思っています。あくまで実機でインストールできるようになってから、エミュレータを活用していきましょう。エミュレータだけで何でもこなそうとするのは間違っていると思います。

　ネットワークを構築できたら、ファイルサーバーやWebサーバーなどを設置してみましょう。また、アタックに興味があれば実験用サーバーの構築をオススメします。最近なら、DB（データベース）へのアタックが流行っているので、実験用サーバーにSQLもインストールして色々試してみましょう。また、キーロガーやSnifferの設置や運用などの実験も可能です。ネットカフェで試すと犯罪ですので、自宅で満足することにしましょう（笑）。何かやろうとするにも、練習は大事ですので。


■0x06.) 収納を考える

　メインデスクが完成したら、そこに収めることができなかった物、特に常に使わないがストックしておく物を収納する場所を確保しておきたいものです。焼いたCD-RやDVD-R、コード、説明書・資料、書籍などが対象となります。

　私の場合、エレクターで大き目の棚を作り、そこに無印良品（以下、無印と略する）の大き目の引出しを載せています。エレクターだと、ひとつひとつ自分で連結して組み立てることができます。強度は申し分ありませんが、ちょっと高いのが難点です。別にエレクターではなく、普通の組み立て式のパイプ棚でも構わないと思います。
　無印の引出し（ポリプロピレン収納用品）は、一応シリーズもので、後で追加しやすく、寸法もしっかりしています。5年度にも多分残っているシリーズだと思ったからです。ひとつ1,500円ぐらいで売っています。この中にコードや小物を入れて整理しています。

・エレクター（http://www.erecta.co.jp/erecta/index.html）
・無印ネットストア（http://store.muji.net/static_html/pc/search/prod_list_S00801_1.html）

　CD系は普通にダンボールに放り込んでいます。できれば、きちんと整理したいものです。もちろん、ドライバーやよく使うアプリのCD-Rはすぐ取り出せるように置いていますが。
　これからはHDD保存の時代かもしれません。HDDやCD-Rの整理法についてもう少し考えていきたいと思っています。


■0x07.) おわりに

　他人の作業スペースや部屋に興味があるので、自慢の部屋や面白い収納・運用アイデアなどがあれば、是非質問掲示板の「環境」スレッドに投稿してみてください。

http://ruffnex.oc.to/ipusiron/cgi/forum/patio.cgi?mode=view&no=20

