x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x

--- 第○章: LogoVistaプロクシ ---

著者：Forging

x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x
x0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0xx0xXx0x


■0x01.) LogoVistaプロクシについて

　LogoVistaプロクシ（LogoVista串、翻訳串とも呼ぶ）とは、「コリャ英和」や
「EtoJ」、「X PRO」のWeb翻訳機能であるローカルプロクシが外部から利用でき
る状態になっているものです。これらの多くはおそらくパソコンにバンドルされ
た「コリャ英和」がそのまま使用可能な状態になっているのではないかと思われ
ます。ただし、利用できるのはプロクシ機能だけで、残念ながら翻訳機能は利用
できないようです。
　見分け方は、「http://ホスト名:ポート番号/」のようにHTTP接続すると、「L
ogoVista Web Translator Error」と表示されます。

　通常のWebプロクシとして利用可能なのは当然として、カスケード接続できる場
合があるという特徴を持ちます。よって、LogoVistaプロクシを複数用意したり、
他のプロクシを併用して多段プロクシが可能です。また、速度もそこそこ早いも
のが多々あります。　何よりもこの手のプロクシのメリットは、国内プロクシで
あり、通常のホスト端末でしかないため、プロクシ規制を回避できる可能性が格
段に高いということです。匿名性の点については、漏れない上に当該パソコンに
ログが残るわけではないので一見無敵なようですが、ISPのサーバーのログに足跡
が残るので、完全な匿名というわけにはいきません。


■0x02.) LogoVistaプロクシ発見のアプローチ

　そのような便利なプロクシも見つけられなければ存在しないも同然です。
　では、どうやって見つけたらよいのでしょうか？　前述の通りLogoVista製品の
内、「コリャ英和」は一般ユーザー向けで数も多いので、かなり探しやすいかと
思います。特に製品を区別できるわけではありませんが…。一般ユーザーは普通、
ISPのドメインにぶら下がっていますので、これらをターゲットにすればよいこと
は容易に想像できます。そこでISPのIPアドレスに対してプロクシのポート番号
が開いているホストが存在しているかどうかをブルートフォース的に調べればよ
いでしょう。その作業にはポートスキャナーを使えばよいのですが、ここではPr
oxyHunterというツールを用いることにします。

●注意:「お客様のシステムとネットワークリソースを保護するため、ProxyHunt
erのような無差別ポート・スキャンニング・プログラムまたはその他の違法行為
が可能なIPアドレスブロックからの全ての送受信を拒否することがあります」と
宣言しているISPもあります。各自確認の上実行してください。アカウントを取り
消されても当方は責任を負いません。


■0x03.) ProxyHunterの基本

　ProxyHunterは公式配布場所が見つからないのですが、「proxyht」という単語
で検索すると、いくつも転載配布されているファイルが見つかります。バージョ
ンは2.8と3.1b1を良く見かけますが、使用上の大きな違いはないと思います。
　ProxyHunterはユーザーが指定したサイトに対しユーザーが指定したIPアドレス
とポートを通してHTTP接続してGETし、HTTP接続できたか、GET結果に所定の文字
列があるかどうかをレポートする機能を持ったソフトウェアです。
　接続先と文字列はデフォルトで設定されたものがありますが、日本のサイトへ
の接続で使用するプロクシを探すなら、ヤフージャパンのトップページを指定す
るのがよいでしょう。比較用文字列は例えばhtmlヘッダ部の「<title>Yahoo! JA
PAN</title>」を指定します。そして、スタートとエンドのIPアドレスと、トライ
するポート番号を指定してやれば、順にトライしてくれます。ポート番号は一般
的な「8080」だけ指定すれば十分でしょう。その他の細かい使い方は各自研究し
てください。

■0x03.) LogoVistaプロクシ発見の方法

　IPアドレス範囲は闇雲に決めてやればよいというわけにはいきません。間違っ
て政府機関のIPアドレスに接続するのは避けたいところです。では、一般ユーザ
ーのIPアドレスの範囲をどうやって調達してくればよいのでしょうか？　自分の
ウェブサイトを持っている方はアクセスログから抽出すればいいですね。自サイ
トは持っていないという方にうってつけの場所はteacupの掲示板です。teacup内
には「みんなの掲示板」という板があり、ソースには投稿者のリモートホストが
記録されています。適当に好みのISPのリモホを取ってきて、JPNICやAPNICのWHO
ISサービスに食わせれば、そのISPのIPアドレス範囲がたちどころに戻ってきます。
この得られた結果をProxyHunterにセットして寝る前に仕掛けておけば、朝目覚め
たときには複数の使えるプロクシが引っかかってくることでしょう。
　結果がGOODのものだけでなく、timeoutのものも保存しておくようお勧めします。
後日のベリファイで使えるようになってることがあるからです。
　そして、たまに漏れ串も引っかかるので注意が必要です。

　手順をまとめると次のようになります。

1：teacup等でリモホを見繕ってくる。

2：WHOISサービスでISPのIP範囲を調査してくる。
　国内ISPであれば拙作の「IPレンジゲッター」でまとめて処理可能する。

3：得られたIP範囲をProxyHunterにセットして実行する。
　ProxyHunter2.8であれば拙作ProxyHunterSupportでまとめてセット可能、Proxy
Hunter3.*であればProxyHunter3Supportでタスク生成可能。

4.収穫し、拙作の「串検良好」で漏れ串を排除する。

　なお、IPレンジゲッター、ProxyHunterSupport、ProxyHunter3Support、串検良
好は「村の鍛冶屋」（http://www.geocities.jp/kajiya_forging/）にて配布して
います。
